'use client';
import React, { useState, useEffect } from 'react';
import { usePathname } from 'next/navigation';
import Link from 'next/link';
import Search from './Search';

interface MenuItem {
  id: number;
  title: string;
  href: string;
}

const Navbar: React.FC = () => {
  const pathname = usePathname();
  const [activeItems, setActiveItems] = useState<number | null>(1);
  const [isopen, setIsOpen] = useState<boolean>(false);
  const [isMenuOpen, setMenuIsOpen] = useState<boolean>(false);

  const menuItems: MenuItem[] = [
    { id: 1, title: 'Home', href: '/' },
    { id: 2, title: 'Movies & Shows', href: '/movies-shows' },
    { id: 3, title: 'Support', href: '/support' },
  ];

  useEffect(() => {
    const activeItem = menuItems.find((item) => item.href === pathname);
    if (activeItem) {
      setActiveItems(activeItem.id);
    }
  }, [pathname]);

  return (
    <div className="w-full flex justify-between items-center container mx-auto py-4 px-6 bg-black">
      <Link href="/" className="flex items-center cursor-pointer">
        <i className="mx-1 flex items-center">
          <svg className='mr-3' width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M49.7834 24.0839C49.3635 10.9327 38.7071 0.319787 25.5115 0C25.1716 0 24.8917 0.259827 24.8917 0.5996L24.8717 9.43371C24.8717 9.87342 24.5318 10.2132 24.092 10.2332C10.9364 10.6329 0.319893 21.3058 0 34.497C0 34.8368 0.259913 35.1166 0.5998 35.1166L9.41686 35.1366C9.85671 35.1366 10.1966 35.4763 10.2166 35.9161C10.6365 49.0673 21.3129 59.6802 34.4885 60C34.8284 60 35.1083 59.7402 35.1083 59.4004L35.1283 50.5663C35.1283 50.1266 35.4682 49.7868 35.908 49.7668C49.0636 49.3471 59.6801 38.6742 60 25.503C60 25.1632 59.7401 24.8834 59.4002 24.8834L50.5831 24.8634C50.1433 24.8634 49.8034 24.5236 49.7834 24.0839ZM34.2486 49.7069C26.7711 49.2672 20.7731 43.1912 20.4932 35.6762C20.4732 35.3564 20.2133 35.0966 19.8934 35.0966L11.0963 35.0766C10.6365 35.0766 10.2766 34.6969 10.2966 34.2372C10.7364 26.7622 16.8144 20.7662 24.3319 20.4863C24.6518 20.4664 24.9117 20.2065 24.9117 19.8867L24.9317 11.0726C24.9317 10.6129 25.3116 10.2532 25.7714 10.2732C33.2489 10.7129 39.2469 16.7888 39.5268 24.3038C39.5468 24.6236 39.8067 24.8834 40.1266 24.8834L48.9237 24.9034C49.3835 24.9034 49.7434 25.2831 49.7234 25.7428C49.2836 33.4177 42.9057 39.5137 35.1283 39.5137L35.1083 48.9074C35.0883 49.3671 34.7084 49.7268 34.2486 49.7069Z" fill="#E60000" />
            <path fillRule="evenodd" clipRule="evenodd" d="M24.6289 24.6828C24.6289 23.4735 25.9255 22.7068 26.9851 23.2897L36.7715 28.6721C37.8698 29.2762 37.8698 30.8544 36.7715 31.4585L26.9851 36.841C25.9255 37.4238 24.6289 36.6571 24.6289 35.4478V24.6828Z" fill="white" />
          </svg>
          <svg width="136" height="20" viewBox="0 0 136 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 6.90537C0 6.14663 0.1431 5.43478 0.429301 4.76982C0.715502 4.10486 1.10271 3.52515 1.59094 3.03069C2.08758 2.52771 2.66419 2.13129 3.32077 1.84143C3.97735 1.55158 4.68022 1.40665 5.42939 1.40665H13.7376V5.07673H5.42939C5.17686 5.07673 4.94117 5.12361 4.72231 5.21739C4.50345 5.31117 4.30984 5.44331 4.14149 5.61381C3.98156 5.77579 3.85529 5.9676 3.7627 6.18926C3.6701 6.41091 3.6238 6.64962 3.6238 6.90537C3.6238 7.16113 3.6701 7.40409 3.7627 7.63427C3.85529 7.85592 3.98156 8.052 4.14149 8.22251C4.30984 8.38448 4.50345 8.51236 4.72231 8.60614C4.94117 8.69991 5.17686 8.7468 5.42939 8.7468H9.0532C9.80237 8.7468 10.5052 8.89173 11.1618 9.18159C11.8268 9.46292 12.4034 9.85507 12.8917 10.3581C13.3883 10.8525 13.7755 11.4365 14.0533 12.11C14.3395 12.7749 14.4826 13.4868 14.4826 14.2455C14.4826 15.0043 14.3395 15.7161 14.0533 16.3811C13.7755 17.046 13.3883 17.63 12.8917 18.133C12.4034 18.6275 11.8268 19.0196 11.1618 19.3095C10.5052 19.5993 9.80237 19.7442 9.0532 19.7442H1.01012V16.0742H9.0532C9.30573 16.0742 9.54142 16.0273 9.76028 15.9335C9.97914 15.8397 10.1685 15.7118 10.3285 15.5499C10.4968 15.3794 10.6273 15.1833 10.7199 14.9616C10.8125 14.74 10.8588 14.5013 10.8588 14.2455C10.8588 13.9898 10.8125 13.7511 10.7199 13.5294C10.6273 13.3078 10.4968 13.1159 10.3285 12.954C10.1685 12.7835 9.97914 12.6513 9.76028 12.5575C9.54142 12.4638 9.30573 12.4169 9.0532 12.4169H5.42939C4.68022 12.4169 3.97735 12.272 3.32077 11.9821C2.66419 11.6922 2.08758 11.3001 1.59094 10.8056C1.10271 10.3026 0.715502 9.71867 0.429301 9.05371C0.1431 8.38022 0 7.66411 0 6.90537Z" fill="white" />
            <path d="M23.056 19.7442C22.2226 19.7442 21.4398 19.5865 20.7075 19.2711C19.9751 18.9471 19.3312 18.5081 18.7756 17.954C18.2285 17.3913 17.7949 16.7391 17.4751 15.9974C17.1636 15.2558 17.0079 14.4629 17.0079 13.6189V9.55243H15.3286V6.07417H17.0079V0.601023H20.4423V6.07417H25.6697V9.55243H20.4423V13.6189C20.4423 13.9855 20.5096 14.3308 20.6443 14.6547C20.779 14.9702 20.9642 15.2472 21.1999 15.4859C21.4356 15.7246 21.7134 15.9165 22.0332 16.0614C22.3531 16.1978 22.694 16.266 23.056 16.266H25.6697V19.7442H23.056Z" fill="white" />
            <path d="M31.0612 19.7442H27.6142V6.04859H28.4475L29.5839 7.67263C30.1395 7.16113 30.7708 6.76897 31.4779 6.49616C32.1849 6.21483 32.9173 6.07417 33.6749 6.07417H36.7179V9.55243H33.6749C33.3129 9.55243 32.972 9.62063 32.6521 9.75703C32.3323 9.89344 32.0545 10.081 31.8188 10.3197C31.5831 10.5584 31.3979 10.8397 31.2632 11.1637C31.1285 11.4876 31.0612 11.8329 31.0612 12.1995V19.7442Z" fill="white" />
            <path d="M43.4478 16.3939C43.5825 16.4365 43.7171 16.4663 43.8518 16.4834C43.9865 16.4919 44.1212 16.4962 44.2559 16.4962C44.5926 16.4962 44.9167 16.4493 45.2281 16.3555C45.5396 16.2617 45.83 16.1296 46.0993 15.9591C46.3771 15.7801 46.6212 15.5669 46.8317 15.3197C47.0505 15.0639 47.2273 14.7826 47.362 14.4757L49.8873 17.046C49.5674 17.5064 49.197 17.9199 48.7762 18.2864C48.3637 18.653 47.9133 18.9642 47.4251 19.2199C46.9453 19.4757 46.4361 19.6675 45.8973 19.7954C45.367 19.9318 44.8199 20 44.2559 20C43.3047 20 42.4082 19.821 41.5664 19.4629C40.7331 19.1049 40.0007 18.6061 39.3694 17.9668C38.7465 17.3274 38.2541 16.5686 37.8921 15.6905C37.5302 14.8039 37.3492 13.8321 37.3492 12.7749C37.3492 11.6922 37.5302 10.7033 37.8921 9.80818C38.2541 8.91304 38.7465 8.15004 39.3694 7.51918C40.0007 6.88832 40.7331 6.39812 41.5664 6.04859C42.4082 5.69906 43.3047 5.5243 44.2559 5.5243C44.8199 5.5243 45.3712 5.5925 45.9099 5.7289C46.4487 5.8653 46.9579 6.06138 47.4378 6.31714C47.926 6.57289 48.3805 6.88832 48.8014 7.26343C49.2223 7.63001 49.5927 8.04348 49.9125 8.50384L43.4478 16.3939ZM45.2155 9.19437C45.0556 9.1347 44.8956 9.09633 44.7357 9.07928C44.5842 9.06223 44.4242 9.05371 44.2559 9.05371C43.7845 9.05371 43.3383 9.14322 42.9175 9.32225C42.505 9.49275 42.143 9.73998 41.8316 10.0639C41.5285 10.3879 41.2886 10.7801 41.1119 11.2404C40.9351 11.6922 40.8467 12.2038 40.8467 12.7749C40.8467 12.9028 40.8509 13.0477 40.8593 13.2097C40.8762 13.3717 40.8972 13.5379 40.9225 13.7084C40.9562 13.8704 40.994 14.0281 41.0361 14.1816C41.0782 14.335 41.1329 14.4714 41.2003 14.5908L45.2155 9.19437Z" fill="white" />
            <path d="M64.6477 19.7442H63.8143L62.4759 17.8645C62.1476 18.1628 61.7983 18.4442 61.4279 18.7084C61.066 18.9642 60.6829 19.1901 60.2789 19.3862C59.8749 19.5737 59.4582 19.7229 59.0289 19.8338C58.608 19.9446 58.1787 20 57.741 20C56.7898 20 55.8933 19.838 55.0515 19.5141C54.2182 19.1901 53.4858 18.7212 52.8545 18.1074C52.2316 17.4851 51.7392 16.7263 51.3772 15.8312C51.0153 14.9361 50.8343 13.9173 50.8343 12.7749C50.8343 11.7093 51.0153 10.7332 51.3772 9.84655C51.7392 8.95141 52.2316 8.18414 52.8545 7.54476C53.4858 6.90537 54.2182 6.41091 55.0515 6.06138C55.8933 5.70332 56.7898 5.5243 57.741 5.5243C58.1787 5.5243 58.6122 5.57971 59.0415 5.69054C59.4708 5.80136 59.8875 5.95482 60.2915 6.1509C60.6956 6.34697 61.0786 6.57715 61.4405 6.84143C61.8109 7.10571 62.156 7.3913 62.4759 7.69821L63.8143 6.07417H64.6477V19.7442ZM61.1754 12.7749C61.1754 12.2975 61.0828 11.8372 60.8976 11.3939C60.7208 10.942 60.4767 10.5456 60.1653 10.2046C59.8538 9.85507 59.4876 9.578 59.0668 9.3734C58.6543 9.16027 58.2124 9.05371 57.741 9.05371C57.2696 9.05371 56.8234 9.1347 56.4026 9.29667C55.9901 9.45865 55.6281 9.69736 55.3167 10.0128C55.0136 10.3282 54.7737 10.7204 54.597 11.1893C54.4202 11.6496 54.3318 12.1782 54.3318 12.7749C54.3318 13.3717 54.4202 13.9045 54.597 14.3734C54.7737 14.8338 55.0136 15.2217 55.3167 15.5371C55.6281 15.8525 55.9901 16.0912 56.4026 16.2532C56.8234 16.4152 57.2696 16.4962 57.741 16.4962C58.2124 16.4962 58.6543 16.3939 59.0668 16.1893C59.4876 15.9761 59.8538 15.6991 60.1653 15.3581C60.4767 15.0085 60.7208 14.6121 60.8976 14.1688C61.0828 13.717 61.1754 13.2523 61.1754 12.7749Z" fill="white" />
            <path d="M84.4839 19.7442H81.0495V11.0486C81.0495 10.8099 81.0032 10.584 80.9106 10.3708C80.8264 10.1577 80.7044 9.97016 80.5444 9.80818C80.3845 9.64621 80.1993 9.52259 79.9889 9.43734C79.7784 9.34356 79.5554 9.29667 79.3197 9.29667C79.084 9.29667 78.8609 9.34356 78.6505 9.43734C78.4484 9.52259 78.2674 9.64621 78.1075 9.80818C77.956 9.97016 77.8339 10.1577 77.7413 10.3708C77.6572 10.584 77.6151 10.8099 77.6151 11.0486V19.7442H74.168V11.0486C74.168 10.8099 74.1217 10.584 74.0292 10.3708C73.945 10.1577 73.8229 9.97016 73.663 9.80818C73.5031 9.64621 73.3179 9.52259 73.1074 9.43734C72.897 9.34356 72.6739 9.29667 72.4382 9.29667C72.2025 9.29667 71.9795 9.34356 71.769 9.43734C71.567 9.52259 71.386 9.64621 71.2261 9.80818C71.0746 9.97016 70.9525 10.1577 70.8599 10.3708C70.7757 10.584 70.7336 10.8099 70.7336 11.0486V19.7442H67.2866V6.04859H68.12L69.0543 7.09719C69.5341 6.68798 70.0602 6.37255 70.6326 6.1509C71.2134 5.92072 71.8153 5.80563 72.4382 5.80563C73.0695 5.80563 73.684 5.92498 74.2817 6.16368C74.8878 6.40239 75.4181 6.81586 75.8726 7.40409C76.0831 7.11424 76.323 6.86701 76.5923 6.6624C76.8617 6.4578 77.1437 6.29156 77.4383 6.16368C77.7413 6.03581 78.0528 5.94629 78.3727 5.89514C78.6925 5.83546 79.0082 5.80563 79.3197 5.80563C80.0352 5.80563 80.7044 5.94203 81.3273 6.21483C81.9586 6.48764 82.5057 6.86274 82.9687 7.34015C83.4401 7.80904 83.8105 8.36317 84.0798 9.00256C84.3492 9.64194 84.4839 10.324 84.4839 11.0486V19.7442Z" fill="white" />
            <path d="M101.214 1.40665L95.2669 19.7442H91.6431L85.7213 1.40665H89.8375L93.4487 13.6445L97.0725 1.40665H101.214Z" fill="white" />
            <path d="M106.656 2.32737C106.656 2.65132 106.593 2.95396 106.467 3.23529C106.349 3.51662 106.185 3.76385 105.974 3.97698C105.764 4.18159 105.515 4.34783 105.229 4.4757C104.951 4.59506 104.653 4.65473 104.333 4.65473C104.013 4.65473 103.71 4.59506 103.424 4.4757C103.146 4.34783 102.902 4.18159 102.691 3.97698C102.489 3.76385 102.325 3.51662 102.199 3.23529C102.081 2.95396 102.022 2.65132 102.022 2.32737C102.022 2.01194 102.081 1.71355 102.199 1.43222C102.325 1.14237 102.489 0.895141 102.691 0.690537C102.902 0.477408 103.146 0.311168 103.424 0.191816C103.71 0.0639386 104.013 0 104.333 0C104.653 0 104.951 0.0639386 105.229 0.191816C105.515 0.311168 105.764 0.477408 105.974 0.690537C106.185 0.895141 106.349 1.14237 106.467 1.43222C106.593 1.71355 106.656 2.01194 106.656 2.32737ZM106.063 19.7442H102.59V6.04859H106.063V19.7442Z" fill="white" />
            <path d="M122.237 12.7749C122.237 13.8491 122.056 14.8295 121.694 15.7161C121.332 16.6027 120.84 17.3657 120.217 18.0051C119.594 18.636 118.862 19.1262 118.02 19.4757C117.187 19.8252 116.29 20 115.33 20C114.379 20 113.483 19.821 112.641 19.4629C111.808 19.1049 111.075 18.6061 110.444 17.9668C109.821 17.3274 109.329 16.5686 108.967 15.6905C108.605 14.8039 108.424 13.8321 108.424 12.7749V0.601023H111.883V6.99488C112.069 6.75618 112.292 6.54305 112.553 6.3555C112.822 6.16795 113.108 6.01449 113.411 5.89514C113.723 5.77579 114.043 5.68627 114.371 5.6266C114.699 5.5584 115.019 5.5243 115.33 5.5243C116.29 5.5243 117.187 5.70759 118.02 6.07417C118.862 6.43222 119.594 6.93521 120.217 7.58312C120.84 8.23103 121.332 8.99829 121.694 9.88491C122.056 10.763 122.237 11.7263 122.237 12.7749ZM118.765 12.7749C118.765 12.2464 118.672 11.7562 118.487 11.3043C118.31 10.844 118.066 10.4476 117.755 10.1151C117.443 9.78261 117.077 9.52259 116.656 9.33504C116.244 9.14748 115.802 9.05371 115.33 9.05371C114.859 9.05371 114.413 9.16027 113.992 9.3734C113.58 9.578 113.218 9.85507 112.906 10.2046C112.595 10.5456 112.351 10.942 112.174 11.3939C111.997 11.8372 111.909 12.2975 111.909 12.7749C111.909 13.3035 111.997 13.7937 112.174 14.2455C112.351 14.6974 112.595 15.0895 112.906 15.422C113.218 15.7545 113.58 16.0188 113.992 16.2148C114.413 16.4024 114.859 16.4962 115.33 16.4962C115.802 16.4962 116.244 16.4024 116.656 16.2148C117.077 16.0188 117.443 15.7545 117.755 15.422C118.066 15.0895 118.31 14.6974 118.487 14.2455C118.672 13.7937 118.765 13.3035 118.765 12.7749Z" fill="white" />
            <path d="M129.535 16.3939C129.67 16.4365 129.805 16.4663 129.939 16.4834C130.074 16.4919 130.209 16.4962 130.343 16.4962C130.68 16.4962 131.004 16.4493 131.316 16.3555C131.627 16.2617 131.917 16.1296 132.187 15.9591C132.465 15.7801 132.709 15.5669 132.919 15.3197C133.138 15.0639 133.315 14.7826 133.449 14.4757L135.975 17.046C135.655 17.5064 135.285 17.9199 134.864 18.2864C134.451 18.653 134.001 18.9642 133.513 19.2199C133.033 19.4757 132.524 19.6675 131.985 19.7954C131.454 19.9318 130.907 20 130.343 20C129.392 20 128.496 19.821 127.654 19.4629C126.821 19.1049 126.088 18.6061 125.457 17.9668C124.834 17.3274 124.342 16.5686 123.98 15.6905C123.618 14.8039 123.437 13.8321 123.437 12.7749C123.437 11.6922 123.618 10.7033 123.98 9.80818C124.342 8.91304 124.834 8.15004 125.457 7.51918C126.088 6.88832 126.821 6.39812 127.654 6.04859C128.496 5.69906 129.392 5.5243 130.343 5.5243C130.907 5.5243 131.459 5.5925 131.997 5.7289C132.536 5.8653 133.045 6.06138 133.525 6.31714C134.013 6.57289 134.468 6.88832 134.889 7.26343C135.31 7.63001 135.68 8.04348 136 8.50384L129.535 16.3939ZM131.303 9.19437C131.143 9.1347 130.983 9.09633 130.823 9.07928C130.672 9.06223 130.512 9.05371 130.343 9.05371C129.872 9.05371 129.426 9.14322 129.005 9.32225C128.592 9.49275 128.23 9.73998 127.919 10.0639C127.616 10.3879 127.376 10.7801 127.199 11.2404C127.023 11.6922 126.934 12.2038 126.934 12.7749C126.934 12.9028 126.938 13.0477 126.947 13.2097C126.964 13.3717 126.985 13.5379 127.01 13.7084C127.044 13.8704 127.081 14.0281 127.124 14.1816C127.166 14.335 127.22 14.4714 127.288 14.5908L131.303 9.19437Z" fill="white" />
          </svg>

        </i>
      </Link>

      <ul className="hidden md:flex items-center rounded-xl py-2 px-6">
        {menuItems.map((item) => (
          <li
            key={item.id}
            className={`mx-4 cursor-pointer text-gray-300 ${item.id === activeItems &&
              'text-white bg-red-600 rounded-lg px-5 py-2'
              }`}
          >
            <Link href={item.href}>{item.title}</Link>
          </li>
        ))}
      </ul>

      <div className="flex items-center">
        <i
          className="cursor-pointer mx-4 text-white"
          onClick={() => setIsOpen(true)}
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M21 21L15.8 15.8M18.5 10.75C18.5 15.0033 15.0033 18.5 10.75 18.5C6.49665 18.5 3 15.0033 3 10.75C3 6.49665 6.49665 3 10.75 3C15.0033 3 18.5 6.49665 18.5 10.75Z"
              stroke="white"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>
        </i>
        <i className='cursor-pointer'><svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M17 19C17 16.2386 13.4183 14 9 14C4.58172 14 1 16.2386 1 19M9 11C6.23858 11 4 8.76142 4 6C4 3.23858 6.23858 1 9 1C11.7614 1 14 3.23858 14 6C14 8.76142 11.7614 11 9 11Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</i>

        <div
          className="cursor-pointer flex flex-col space-y-1 lg:hidden"
          onClick={() => setMenuIsOpen(!isMenuOpen)}
        >
          <span
            className={`block w-7 h-1 bg-white transform transition-transform ${isMenuOpen ? 'rotate-45 translate-y-2' : ''
              }`}
          ></span>
          <span
            className={`block w-7 h-1 bg-white ${isMenuOpen ? 'opacity-0' : ''
              }`}
          ></span>
          <span
            className={`block w-7 h-1 bg-white transform transition-transform ${isMenuOpen ? '-rotate-45 -translate-y-2' : ''
              }`}
          ></span>
        </div>
      </div>

      <div
        className={`fixed inset-0 bg-black-velvet flex flex-col items-center justify-center z-50 transition-transform ${isMenuOpen ? 'translate-y-0' : '-translate-y-full'
          }`}
      >
        <button
          className="absolute top-5 right-5 text-white text-2xl"
          onClick={() => setMenuIsOpen(false)}
        >
          ✕
        </button>
        <ul className="text-white text-2xl space-y-6">
          {menuItems.map((item) => (
            <li key={item.id} onClick={() => setMenuIsOpen(false)}>
              <Link href={item.href}>{item.title}</Link>
            </li>
          ))}
        </ul>
      </div>

      {isopen && <Search setIsOpen={setIsOpen} />}
    </div>
  );
};

export default Navbar;
